<app-page [busy]="busy">
  <app-tco-page-header>
    <ng-container header>British Columbia Ticket Resolution</ng-container>
    <ng-container subHeader>
      Use this service to pay ticket fines, ask for fine reductions ro more time
      to pay, or initiate a dispute.
    </ng-container>
  </app-tco-page-header>

  <div class="flex flex-last">
    <div class="flex-2-col info">
      <div class="flex-last-info-content">
        <form
          class="mb-4"
          [formGroup]="form"
          (ngSubmit)="onSearch()"
          novalidate
        >
          <div class="row mb-4">
            <div class="col-md-12">
              <mat-form-field class="w-100">
                <mat-label>Ticket number</mat-label>
                <input
                  formControlName="ticketNumber"
                  matInput
                  type="text"
                  oninput="this.value =
                    this.value.toUpperCase()"
                  mask="SS00000000"
                  autocomplete="off"
                />
                <button
                  mat-button
                  matSuffix
                  mat-icon-button
                  aria-label="Clear"
                  (click)="ticketNumber.setValue('')"
                >
                  <mat-icon>close</mat-icon>
                </button>
                <mat-hint>
                  <small> A Ticket number is 2 letters and 8 numbers </small>
                </mat-hint>
                <mat-error>{{ "error.required" | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-12">
              <mat-form-field class="w-100">
                <mat-label>Ticket time</mat-label>
                <input matInput type="time" formControlName="time" />
                <mat-error>{{ "error.required" | translate }}</mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <a class="examples" (click)="onViewTicketExample()">
                <mat-icon class="anchor-icon mt-2 mr-2" inline="true"
                  >article</mat-icon
                >
                View ticket examples
              </a>
            </div>
            <div class="offset-md-2 col-md-6">
              <button
                type="submit"
                mat-flat-button
                color="primary"
                class="find-large"
              >
                <mat-icon inline="true">search</mat-icon>
                Find ticket
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="flex-2-col info">
      <div class="row">
        <div class="col-md-12">
          <button
            type="button"
            mat-stroked-button
            color="primary"
            class="find-large"
            routerLink="/ticket/image"
          >
            <mat-icon inline="true">camera</mat-icon>
            Take photo of ticket
          </button>
        </div>
      </div>
    </div>
  </div>

  <section class="mb-4" *ngIf="notFound">
    <app-alert type="danger" icon="error">
      <ng-container #alertContent class="alert-content">
        <strong>No result found</strong>
        <p>Sorry, we are unable to find your ticket.</p>
        <p>
          Your ticket is not yet in the system. If it has been more than 48
          hours since your ticket was issued, you will need to upload an image
          of your ticket and confirm the details to proceed.
        </p>
      </ng-container>
    </app-alert>
  </section>

  <section class="mb-4 mt-4">
    <div class="row">
      <div class="col-lg-12">
        <app-alert type="info" icon="info" (click)="this.notFound = true">
          <ng-container #alertContent class="alert-content">
            <strong>Violation ticket centre contact information</strong><br />
            {{ "find.note_phone" | translate }}:
            <a href="tel:+18776618026">1-877-661-8026</a><br />
            {{ "find.note_forms" | translate }}:
            <a
              href="https://www2.gov.bc.ca/gov/content/justice/courthouse-services/documents-forms-records/court-forms/provincial-vt-forms"
              target="_blank"
              rel="noopener"
              >{{ "find.note_form_name" | translate }}</a
            >
          </ng-container>
        </app-alert>
      </div>
    </div>
  </section>
</app-page>
