<app-page [busy]="busy">
  <app-tco-page-header>
    <ng-container header>British Columbia Ticket Resolution</ng-container>
    <ng-container subHeader>
      Use this service to pay ticket fines, ask for fine reductions or more time
      to pay, or initiate a dispute.
    </ng-container>
  </app-tco-page-header>

  <div class="flex flex-last">
    <div class="flex-2-col info">
      <div class="flex-last-info-content">
        <form [formGroup]="form" (ngSubmit)="onSearch()" novalidate>
          <div class="row">
            <div class="col-md-12">
              <mat-form-field class="w-100">
                <mat-label>Ticket number</mat-label>
                <input
                  formControlName="ticketNumber"
                  matInput
                  type="text"
                  oninput="this.value =
                    this.value.toUpperCase()"
                  mask="SS00000000"
                  autocomplete="off"
                />
                <button
                  mat-button
                  matSuffix
                  mat-icon-button
                  aria-label="Clear"
                  (click)="ticketNumber.setValue('')"
                >
                  <mat-icon>close</mat-icon>
                </button>
                <mat-hint>
                  <small> A Ticket number is 2 letters and 8 numbers </small>
                </mat-hint>
                <mat-error>{{ "error.required" | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-12">
              <mat-form-field class="w-100">
                <mat-label>Ticket time</mat-label>
                <input matInput type="time" formControlName="time" />
                <mat-error>{{ "error.required" | translate }}</mat-error>
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <a class="examples" (click)="onViewTicketExample()">
                <mat-icon class="me-2">article</mat-icon>
                View ticket examples
              </a>
            </div>
            <div class="offset-md-2 col-md-6">
              <button
                type="submit"
                mat-flat-button
                color="primary"
                class="find-large"
              >
                <mat-icon class="me-2">search</mat-icon>
                Find ticket
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="flex-2-col info">
      <div class="row" *ngIf="notFound">
        <div class="col-md-12">
          <app-alert type="danger" icon="error">
            <ng-container #alertContent class="alert-content">
              <strong>Ticket not found.</strong>
              <p>Please take photo or upload images.</p>
            </ng-container>
          </app-alert>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <button
            type="button"
            mat-stroked-button
            color="primary"
            class="find-large"
            routerLink="/ticket/image"
          >
            <mat-icon class="me-2">photo_camera</mat-icon>
            Capture / Upload photo of ticket
          </button>
          <!--
          <button
            type="button"
            mat-stroked-button
            color="primary"
            class="find-large"
            routerLink="/ticket/image"
          >
            <mat-icon class="me-2">upload_file</mat-icon>
            Upload ticket image
          </button>
          -->
        </div>
      </div>
    </div>
  </div>

  <app-dispute-footer></app-dispute-footer>
</app-page>
